<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Search Results | {{ catalog.title }}</title>

    <!-- SEO -->
    <meta name="description" content="{{ catalog.description }}">
    <meta name="keywords" content="{{ catalog.keywords }}">
    <meta name="author" content="{{ catalog.author }}">

    <!-- OG -->
    <meta property="og:title" content="{{ catalog.title }}" />
    <meta property="og:url" content="{{ catalog.url }}" />
    <meta property="og:image" content="{{ path_prefix }}{{ catalog.image }}" />
    <meta property="og:description" content="{{ catalog.description }}" />
    <meta property="og:site_name" content="{{ catalog.title }}" />

    <!-- Scripts -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.0/css/bulma.min.css">
    <link rel="stylesheet" href="{{ path_prefix }}/css/main.css">
    <link rel="stylesheet" href="{{ path_prefix }}/css/bulma/bulma-switch.min.css">
    <script src="https://kit.fontawesome.com/52ec62d041.js" crossorigin="anonymous" async></script>
  </head>

  <body>
    <!-- Navbar -->
    <nav class="navbar is-fixed-top" role="navigation" aria-label="main navigation">
      <div class="navbar-brand">
        <a class="navbar-item" href="{{ catalog.base_url }}">
          <img src="{{ path_prefix }}{{ catalog.image }}" width="28" height="28"
               alt="{{ catalog.title }} logo">
        </a>
    
        <a role="button" class="navbar-burger burger" aria-label="menu" aria-expanded="false" data-target="ssNavBarTop" 
        onclick="document.querySelector('.navbar-menu').classList.toggle('is-active');">
          <span aria-hidden="true"></span>
          <span aria-hidden="true"></span>
          <span aria-hidden="true"></span>
        </a>
      </div>

      <div id="appimage-navbar" class="navbar-menu">
        <div class="navbar-start">
          <a class="navbar-item" href="#main">
            Home
          </a>
          <a class="navbar-item" href="#projects">
            Projects
          </a>
          <div class="navbar-item has-dropdown is-hoverable">
            <a class="navbar-link" href="#"  onclick="return false;">
              More
            </a>
    
            <div class="navbar-dropdown">
              <a class="navbar-item" href="#about">
                About
              </a>
              <a class="navbar-item" href="#contact">
                Contact
              </a>
              <hr class="navbar-divider">
              <a class="navbar-item" href="{{ catalog.issue_tracker }}">
                Report an issue
              </a>
            </div>
          </div>
        </div>
    
        <div class="navbar-end">
          <div class="navbar-item">
            <div class="field" style="margin: 0.5em;">
              <input id="themeSwitch" type="checkbox" name="switchRoundedDefault" class="switch is-rounded">
              <label for="themeSwitch">
                <i class="fa fa-sun"></i><span class="sr-only">Light Mode</span>
              </label>
            </div>

          </div>
        </div>
      </div>
    </nav>
    
    <!-- Search Results - indicator -->
    <section style="margin-top: 3.25em;" class="hero is-primary">
      <div class="hero-body">
        <div class="container">
          <h1 class="title" style="margin-bottom: 0.5em;">
            Search results
          </h1>

          <form id="appimage-search-container">
            <div class="form-row">
              <input id="appimage-search-box"
                class="input appimage-search-input"
                placeholder="Search for AppImages!"
                autofocus name="q"
              />
              <button class="button is-success" type="submit" style="margin-left: 15px;width: 48px;height: 48px;border-radius:50%">
                <i class="fa fa-search"></i>
              </button>

            </div>
          </form>
        </div>
      </div>
    </section>



    <!-- All the other code comes here! -->

    <!-- Appimages card sections -->
    <section id="appimages-list" class="section" style="margin-top: 2em;">
      <div class="container">

        <div class="columns is-multiline is-desktop" style="margin: 1em 0;">
          <div id="col-0" class="column is-one-third-desktop appimage-project-column">

          </div>
          <div id="col-1" class="column is-one-third-desktop appimage-project-column">

          </div>
          <div id="col-2" class="column is-one-third-desktop appimage-project-column">

          </div>
        </div>
      </div>
    </section>  
    

    <!-- Scripts -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/minisearch@2.2.2/dist/umd/index.min.js"></script>
    <script src="{{ path_prefix }}/js/utils.js"></script>
    <script src="{{ path_prefix }}/js/search.js"></script>
    <script>
        
      function darkTheme() {
        $(":root").get(0).style.setProperty("--foreground-color", "#ffffff");
        $(":root").get(0).style.setProperty("--foreground-color-2", "#fafafa");
        $(":root").get(0).style.setProperty("--background-color", " #121212");
        $(":root").get(0).style.setProperty("--background-color-2", " #000000");
        $("label[for='themeSwitch']").html('<i class="fa fa-moon"></i><span class="sr-only">Dark Mode</span>')
        $('#themeSwitch').prop('checked', true);
        $("#bulma").attr("src","{{ path_prefix }}/img/made-with-bulma--white.png");
        $(":root").get(0).style.setProperty("--cth", "0");
      }

      function lightTheme() {
        $(":root").get(0).style.setProperty("--foreground-color", "#000");
        $(":root").get(0).style.setProperty("--foreground-color-2", "#121212");
        $(":root").get(0).style.setProperty("--background-color", " #fafafa");
        $(":root").get(0).style.setProperty("--background-color-2", " #ffffff");
        $("label[for='themeSwitch']").html('<i class="fa fa-sun"></i><span class="sr-only">Light Mode</span>')
        $('#themeSwitch').prop('checked', false);
        $("#bulma").attr("src","{{ path_prefix }}/img/made-with-bulma--black.png");
        $(":root").get(0).style.setProperty("--cth", "255");
      }

      $(document).ready(function(){
        const userPrefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;

        if ( userPrefersDark ) {
          darkTheme();
        }

        $('#themeSwitch').change(function() {
          if (this.checked) {
            darkTheme();
          } else {
            lightTheme();
          }
        });

        const queryString = window.location.search;
        console.log(queryString);
        const urlParams = new URLSearchParams(queryString);
        const query = urlParams.get('q')
        console.log(query);

        if (query) {
          $('#appimage-search-box').val(query)
        }

        loadAllAppImageCards();

      });
    </script>

  </body>
  <footer class="footer">
    <div class="content has-text-centered">
      <p>
        &copy; <strong>Srevin Saju</strong> 2020.
        <br>
        This website is licensed under a <a href="http://creativecommons.org/licenses/by-nc-nd/4.0" target="_blank" rel="noreferrer">
          Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License.
        </a>
        <br>
        <a href="https://bulma.io">
          <img id="bulma" src="{{ path_prefix }}/img/made-with-bulma--black.png"
               alt="Made with Proudly built with Bulma" width="128" height="24" style="margin-bottom: 0;">
        </a>
        <br>
        Icons provided by <a href="https://fontawesome.com/" target="_blank" rel="noreferrer">FontAwesome</a>.
        <br>
 
      </p>
      <a href="http://creativecommons.org/licenses/by-nc-nd/4.0"
         target="_blank" rel="noreferrer"><img src="../img/by-nc-nd.svg"
                                               alt="CC-BY-NC-ND"></a>

    </div>
  </footer>


</html>